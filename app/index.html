<html>
  <head>
    <title>3dee</title>
    <style>canvas { width: 100%; height: 100% }</style>
  </head>
  <body>
        <script type="x-shader/x-vertex" id="fboVert">
    varying vec2 vUv;

    void main() 
    {

    vUv = vec2(uv.x, uv.y);

    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    } 
        </script>
        <script type="x-shader/x-fragment" id="fboFrag">
    // simulation
    varying vec2 vUv;

    uniform sampler2D tPositions;

    vec4 grad4(float j, vec4 ip)
    {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;

    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;

    return p;
    }

    // (sqrt(5) - 1)/4 = F4, used once below
    #define F4 0.309016994374947451

    void main() 
    {
    vec3 pos = texture2D( tPositions, vUv ).xyz;

    // pos.x += snoise(vec4(pos.x, pos.y, pos.z, timer/10000.0)) * 0.01;
    // pos.y += snoise(vec4(pos.x, pos.y, pos.z, 1.352+timer/10000.0)) * 0.01;
    // pos.z += snoise(vec4(pos.x, pos.y, pos.z, 12.352+timer/10000.0)) * 0.01;



    // Write new position out
    gl_FragColor = vec4(pos, 1.0);

    }
        </script>

        <script type="x-shader/x-vertex" id="fboRenderVert">
    uniform sampler2D map;

    uniform float width;
    uniform float height;

    uniform float pointSize;

    varying vec2 vUv;
    varying vec4 vPosition;


    void main()
    {

    vUv = position.xy + vec2( 0.5 / width, 0.5 / height );

    vec3 position = ( texture2D( map, vUv ).rgb  );

    gl_PointSize = pointSize;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
        </script>
        <script type="x-shader/x-fragment" id="fboRenderFrag">
    uniform sampler2D map;
    uniform float effector;

    varying vec2 vUv;
    varying vec4 vPosition;

    void main()
    {
    gl_FragColor = vec4( 1.2,1.1,1.8,1.0 );
    gl_FragColor *= 1.5;


    }
        </script>
    <script data-main="assets/main.js" src="vendor/requirejs/require.js">></script>

  </body>
</html>
